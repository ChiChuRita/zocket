---
title: Adapters
description: Run Zocket on different runtimes
icon: lucide:plug
---

Zocket’s server is adapter-based:

- **Bun**: use `createBunServer(...)` (included)
- **Other runtimes**: implement a `ServerAdapter` and use `createServer(...)`

## Bun (recommended today)

```ts
import { zocket, createBunServer } from "@zocket/core";

const zo = zocket.create({ /* ... */ });
const appRouter = zo.router().outgoing({ /* ... */ }).incoming(() => ({}));

const handlers = createBunServer(appRouter, zo);

Bun.serve({
  fetch: handlers.fetch,
  websocket: handlers.websocket,
  port: 3000,
});
```

## Custom adapter (Node/Deno/etc.)

If your runtime can provide:

- a WebSocket-like connection (`send`, `close`)
- optional pub/sub (`subscribe`, `unsubscribe`, and `publish`)

…you can wire it into Zocket via `createServer`:

```ts
import { createServer, type ServerAdapter } from "@zocket/core";

const adapter: ServerAdapter = {
  start({ port, hostname, onUpgrade, onOpen, onMessage, onClose }) {
    // Start your server here.
    // - Call onUpgrade(...) during HTTP upgrade.
    // - Call onOpen/onMessage/onClose for WebSocket lifecycle.
    // - Return { port, stop(), publish? }.
    return {
      port: port ?? 3000,
      stop() {
        /* ... */
      },
      publish(topic, message) {
        /* optional: enables efficient broadcast/toRoom */
      },
    };
  },
};

const server = createServer(appRouter, zo, adapter, { port: 3000 });

server.send.system.announcement({ text: "Hello" }).broadcast();
```

### Rooms and pub/sub

Rooms (`ctx.rooms.join(...)`, `send.*.toRoom(...)`) rely on the adapter’s pub/sub hooks. If your adapter doesn’t support publishing, `toRoom(...)` won’t work and will log a warning.

