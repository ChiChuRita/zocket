---
title: Configuration
description: Reconnection, headers, and lifecycle hooks
icon: lucide:settings
---

## Initialization Options

The `createZocketClient` function accepts a configuration object as the second argument.

```typescript
const client = createZocketClient<AppRouter>("ws://localhost:3000", {
  // 1. Headers (passed as query params)
  headers: {
    authorization: "Bearer token123",
    "x-device-id": "device-1",
  },

  // 2. Lifecycle Hooks
  onOpen: () => {
    console.log("Connected to server");
  },
  onClose: () => {
    console.log("Disconnected from server");
  },
  
  // 3. Debug Mode (logs all events)
  debug: process.env.NODE_ENV === "development",
});
```

`headers` are appended to the WebSocket URL as query parameters (this works in browsers, where custom headers aren’t supported for WebSocket connections).

Header keys must match your server’s `zocket.create({ headers: ... })` schema keys (including casing). Prefer lowercase keys like `authorization`.

## Reconnection Logic

Zocket includes a `reconnect()` method to manually trigger a reconnection.

```typescript
client.onClose(() => {
  console.log("Connection lost. Reconnecting in 5s...");
  setTimeout(() => {
    client.reconnect();
  }, 5000);
});
```

*Note: Automatic reconnection with backoff strategies is planned for future versions.*

## Error Handling

You can listen for global WebSocket errors.

```typescript
client.onError((error) => {
  console.error("Global WebSocket Error:", error);
});
```

You can also read:

- `client.readyState` (`0` connecting, `1` open, `2` closing, `3` closed)
- `client.lastError` (the last observed WebSocket error event, if any)
