---
title: Authentication
description: Secure your WebSocket connections
icon: lucide:lock
---

Authentication in WebSockets usually happens during the initial connection handshake. Since standard WebSocket APIs in browsers don't support custom headers, Zocket (and many other libs) sends "headers" as URL query parameters.

### Server Side

Validate headers in the `onConnect` callback. Throwing an error here will reject the connection.

```typescript
const zo = zocket.create({
  headers: z.object({
    token: z.string(),
  }),
  onConnect: async (headers) => {
    const user = await verifyToken(headers.token);
    
    if (!user) {
      throw new Error("Unauthorized");
    }

    // Return the user to set it as the context
    return { user };
  },
});
```

### Client Side

Pass headers in the `createZocketClient` options.

```typescript
const client = createZocketClient<AppRouter>("ws://localhost:3000", {
  headers: {
    token: "user-session-token",
  },
});
```
