---
title: Error Handling
description: Managing errors on both server and client
icon: lucide:alert-triangle
---

Zocket is still early-stage, and error behavior differs depending on where the error happens.

## Procedure (RPC) errors

As of `@zocket/core@0.1.0`, thrown errors are **not** serialized back to the client as a structured response. If a handler throws (or payload validation fails), the client call may eventually reject due to the RPC timeout (10s by default).

### Recommended pattern: return a typed result

Instead of throwing, return a discriminated union (or `{ ok: boolean }`) and handle it on the client.

```typescript
// Server
.handle(({ input }) => {
  if (!isValid(input)) {
    return { ok: false as const, error: "VALIDATION_FAILED" as const };
  }
  return { ok: true as const };
})

// Client
const res = await client.doSomething(/* ... */);
if (!res.ok) {
  console.error(res.error);
}
```

## Connection errors

Listen to global connection errors using the `onError` hook or `lastError` property.

```typescript
client.onError((err) => {
  console.error("Socket error:", err);
});
```
