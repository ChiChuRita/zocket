---
title: Headers
description: Learn how to pass custom headers to the Zocket server.
---

# Client Headers

Pass custom headers to the server for authentication, configuration, or metadata.

## Basic Headers

```typescript
const client = createZocketClient<AppRouter>("ws://localhost:3000", {
  headers: {
    authorization: "Bearer token123",
  },
});
```

## Authentication Headers

### Bearer Token

```typescript
const token = localStorage.getItem("auth_token");

const client = createZocketClient<AppRouter>("ws://localhost:3000", {
  headers: {
    authorization: `Bearer ${token}`,
  },
});
```

### API Key

```typescript
const client = createZocketClient<AppRouter>("ws://localhost:3000", {
  headers: {
    "api-key": "your-api-key-here",
  },
});
```

### Session ID

```typescript
const client = createZocketClient<AppRouter>("ws://localhost:3000", {
  headers: {
    "session-id": getSessionId(),
  },
});
```

## Multiple Headers

```typescript
const client = createZocketClient<AppRouter>("ws://localhost:3000", {
  headers: {
    authorization: `Bearer ${token}`,
    "client-version": "1.2.0",
    "device-id": getDeviceId(),
    "user-agent": navigator.userAgent,
  },
});
```

## Dynamic Headers

Get headers from functions:

```typescript
const getHeaders = () => ({
  authorization: `Bearer ${getToken()}`,
  "request-id": crypto.randomUUID(),
  timestamp: new Date().toISOString(),
});

const client = createZocketClient<AppRouter>("ws://localhost:3000", {
  headers: getHeaders(),
});
```

## Server-Side Validation

Headers are validated on the server:

```typescript
// Server
const zo = zocket.create({
  headers: z.object({
    authorization: z.string().regex(/^Bearer .+/),
    "client-version": z.string().default("1.0.0"),
  }),

  onConnect: async (headers, clientId) => {
    const token = headers.authorization.replace("Bearer ", "");
    const user = await validateToken(token);

    if (!user) {
      throw new Error("Invalid token");
    }

    return {
      userId: user.id,
      username: user.name,
    };
  },
});
```

## Complete Example

```typescript
import { createZocketClient } from "@zocket/core";
import type { AppRouter } from "./server";

// Get authentication data
const token = localStorage.getItem("auth_token");
const deviceId = localStorage.getItem("device_id") || crypto.randomUUID();

// Create client with headers
const client = createZocketClient<AppRouter>("ws://localhost:3000", {
  headers: {
    // Authentication
    authorization: `Bearer ${token}`,

    // Client info
    "client-version": "1.2.0",
    "device-id": deviceId,
    platform: navigator.platform,

    // Optional metadata
    "screen-size": `${window.innerWidth}x${window.innerHeight}`,
    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
  },

  onOpen: () => {
    console.log("Connected with headers:", {
      token: token ? "***" : "none",
      deviceId,
    });
  },
});

export default client;
```

## Best Practices

### 1. Secure Sensitive Data

```typescript
// ✅ Good: Don't log sensitive headers
console.log("Connecting with device:", deviceId);

// ❌ Bad: Logging tokens
console.log("Token:", token); // Don't do this!
```

### 2. Validate on Server

```typescript
// Server
headers: z.object({
  authorization: z.string().min(1),
  "api-key": z.string().uuid(),
});
```

### 3. Handle Missing Headers

```typescript
const token = localStorage.getItem("auth_token");

if (!token) {
  // Redirect to login
  window.location.href = "/login";
} else {
  const client = createZocketClient<AppRouter>("ws://localhost:3000", {
    headers: { authorization: `Bearer ${token}` },
  });
}
```

### 4. Refresh Tokens

```typescript
const refreshToken = async () => {
  const newToken = await fetch("/api/refresh").then((r) => r.json());
  localStorage.setItem("auth_token", newToken);

  // Reconnect with new token
  client.close();
  const newClient = createZocketClient<AppRouter>("ws://localhost:3000", {
    headers: { authorization: `Bearer ${newToken}` },
  });
};
```

## Next Steps

- [Create a client](/client/creating-client)
- [Manage connections](/client/connection-management)
- [Implement authentication](/advanced/authentication)
