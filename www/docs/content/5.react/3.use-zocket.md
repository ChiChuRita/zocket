---
title: useZocket
description: Learn how to use the useZocket hook to access the WebSocket client.
---

# useZocket Hook

The `useZocket` hook provides access to the Zocket client and event listener hook.

## Basic Usage

```tsx
import { useZocket } from "@zocket/react";
import type { AppRouter } from "./server";

function Chat() {
  const { client, useEvent } = useZocket<AppRouter>();

  // Use client to send messages
  const sendMessage = (text: string) => {
    client.send.chat.message({ text });
  };

  return <button onClick={() => sendMessage("Hi!")}>Send</button>;
}
```

## Return Values

### client

The Zocket client instance:

```tsx
const { client } = useZocket<AppRouter>();

// Send messages
client.send.chat.message({ text: "Hello" });

// Access connection state
console.log(client.readyState);

// Manual control
client.reconnect();
client.close();
```

### useEvent

Hook for subscribing to events:

```tsx
const { useEvent } = useZocket<AppRouter>();

useEvent(client.on.chat.onMessage, (data) => {
  console.log(data);
});
```

## Complete Example

```tsx
import { useState } from "react";
import { useZocket } from "@zocket/react";
import type { AppRouter } from "./server";

function Chat() {
  const { client, useEvent } = useZocket<AppRouter>();
  const [messages, setMessages] = useState([]);
  const [input, setInput] = useState("");

  // Listen for messages
  useEvent(client.on.chat.onMessage, (data) => {
    setMessages((prev) => [...prev, data]);
  });

  // Send message
  const sendMessage = () => {
    if (input.trim()) {
      client.send.chat.message({ text: input });
      setInput("");
    }
  };

  return (
    <div>
      <div>
        {messages.map((msg, i) => (
          <div key={i}>
            {msg.user}: {msg.text}
          </div>
        ))}
      </div>

      <input
        value={input}
        onChange={(e) => setInput(e.target.value)}
        onKeyPress={(e) => e.key === "Enter" && sendMessage()}
      />

      <button onClick={sendMessage}>Send</button>
    </div>
  );
}
```

## Type Safety

The hook is fully typed based on your router:

```tsx
const { client } = useZocket<AppRouter>();

// Full autocomplete and type checking
client.send.chat.message({ text: "Hi" }); // ✅
client.send.chat.message({ count: 5 }); // ❌ Type error
```

## Error Handling

```tsx
function Chat() {
  const { client } = useZocket<AppRouter>();

  if (!client) {
    throw new Error("useZocket must be used within ZocketProvider");
  }

  // ... use client
}
```

The hook automatically throws if used outside a provider.

## Best Practices

### 1. Use at Component Level

```tsx
// ✅ Good: Use in component
function Chat() {
  const { client } = useZocket<AppRouter>();
  // ...
}

// ❌ Bad: Use outside component
const { client } = useZocket<AppRouter>();
function Chat() {
  // ...
}
```

### 2. Destructure What You Need

```tsx
// ✅ Good: Only take what you need
const { client } = useZocket<AppRouter>();

// If you need both
const { client, useEvent } = useZocket<AppRouter>();
```

### 3. Memoize Handlers

```tsx
const sendMessage = useCallback(
  (text: string) => {
    client.send.chat.message({ text });
  },
  [client]
);
```

## Next Steps

- [Handle events with useEvent](/react/use-event)
- [See complete examples](/examples/ping-pong)
